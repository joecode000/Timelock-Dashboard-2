index.html:

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>DCA + Timelock Monitor</title>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, sans-serif;
      background: radial-gradient(circle at top, #141627 0, #050711 60%);
      color: #f5f5f7;
    }

    .dashboard {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.5rem 1rem 3rem;
    }

    .top-header {
      margin-bottom: 1.5rem;
    }

    .title-block h1 {
      margin: 0;
      font-size: 1.4rem;
    }

    .title-block p {
      margin: 0.25rem 0 0;
      opacity: 0.8;
      font-size: 0.9rem;
    }

    .market-strip {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-top: 0.9rem;
    }

    .strip-item {
      flex: 1 1 220px;
      padding: 0.7rem 0.9rem;
      border-radius: 12px;
      background: rgba(10, 12, 26, 0.95);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .strip-item .label {
      font-size: 0.8rem;
      opacity: 0.75;
      margin-bottom: 0.2rem;
    }

    .strip-item .value {
      font-size: 1rem;
      font-weight: 600;
    }

    .card {
      border-radius: 14px;
      background: rgba(8, 10, 22, 0.98);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.55);
      padding: 1rem 1.25rem;
      margin-bottom: 1.25rem;
    }

    .card h2 {
      margin: 0 0 0.75rem;
      font-size: 1.1rem;
    }

    .portfolio-summary-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 0.75rem;
      font-size: 0.85rem;
    }

    .portfolio-summary-item {
      padding: 0.35rem 0.6rem;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.03);
    }

    .portfolio-summary-item span.label {
      opacity: 0.8;
      margin-right: 0.25rem;
    }

    .portfolio-summary-item span.value {
      font-weight: 600;
    }

    .timelock-table-wrapper {
      overflow-x: auto;
    }

    table.timelock-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      min-width: 900px;
    }

    table.timelock-table thead {
      background: rgba(255, 255, 255, 0.05);
    }

    table.timelock-table th,
    table.timelock-table td {
      padding: 0.45rem 0.5rem;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      white-space: nowrap;
    }

    table.timelock-table th {
      font-weight: 600;
      font-size: 0.78rem;
      opacity: 0.9;
    }

    table.timelock-table td.address {
      max-width: 220px;
      white-space: normal;
      word-break: break-all;
    }

    table.timelock-table td.numeric {
      text-align: right;
    }

    .pl-positive {
      color: #34e39a;
    }

    .pl-negative {
      color: #ff6b6b;
    }

    .notes-card {
      margin-top: 0.75rem;
    }

    .vault-notes-row {
      margin-bottom: 0.8rem;
    }

    .vault-notes-row h3 {
      margin: 0 0 0.25rem;
      font-size: 0.9rem;
    }

    .vault-notes-row textarea {
      width: 100%;
      min-height: 60px;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.18);
      border-radius: 8px;
      padding: 0.45rem;
      color: #fff;
      resize: vertical;
      font-size: 0.85rem;
      font-family: inherit;
    }

    @media (max-width: 640px) {
      .dashboard {
        padding: 1rem 0.6rem 2.5rem;
      }
    }
  </style>
</head>
<body>
  <main class="dashboard">
    <!-- TOP: BTC + GOLD MARKET CAP -->
    <header class="top-header">
      <div class="title-block">
        <h1>‚Çø Bitcoin ‚Ä¢ Real-time</h1>
        <p>Bitcoin vault, timelocks, DCA cost basis & gold market cap in one view.</p>
      </div>

      <div class="market-strip">
        <div class="strip-item">
          <div class="label">Bitcoin price (USD)</div>
          <div class="value" id="btc-price">$0.00</div>
        </div>
        <div class="strip-item">
          <div class="label">Bitcoin market cap</div>
          <div class="value" id="btc-mcap">$0.00</div>
        </div>
        <div class="strip-item">
          <div class="label">Gold market cap</div>
          <div class="value" id="gold-mcap">$14.2T (static est.)</div>
        </div>
      </div>
    </header>

    <!-- MAIN: TIMELOCK OVERVIEW FORMAT -->
    <section class="card">
      <h2>‚è±Ô∏è Timelock Overview</h2>

      <!-- PORTFOLIO SUMMARY (replaces sidebar) -->
      <div class="portfolio-summary-bar" id="portfolio-summary">
        <!-- Filled by JS -->
      </div>

      <!-- TABLE -->
      <div class="timelock-table-wrapper">
        <table class="timelock-table">
          <thead>
            <tr>
              <th>Vault</th>
              <th>Address</th>
              <th>üîê Lock date</th>
              <th>Unlock date</th>
              <th class="numeric">üí∏ Invested (USD)</th>
              <th class="numeric">ü™ô BTC</th>
              <th class="numeric">‚ö° Sats</th>
              <th class="numeric">üéØ Blended avg (USD/BTC)</th>
              <th class="numeric">üìà Current value</th>
              <th class="numeric">üíπ P/L</th>
              <th class="numeric">ROI %</th>
              <th class="numeric">‚è≥ Time in market (days)</th>
            </tr>
          </thead>
          <tbody id="timelock-body">
            <!-- Rows injected by JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- VAULT NOTES (keeps your localStorage notes, no sidebar) -->
    <section class="card notes-card">
      <h2>üìù Vault Notes</h2>
      <div id="notes-container"></div>
    </section>
  </main>

  <script>
    const MS_PER_DAY = 1000 * 60 * 60 * 24;
    const GOLD_MARKET_CAP = 14_200_000_000_000; // static est.

    // === VAULT DATA ===
    const vaults = [
      {
        label: "2022 ‚Äì Vault 1",
        address: "3KMrnQymf9gfu1QzYTepCGy8rv4Je2nHby",
        investedUsd: 500.0,
        btcAmount: 0.01299249,
        startDate: "2022-03-12",   // lock date
        unlockDate: null,          // no expiration shown
        notes: "üéØ First base vault started March 12, 2022."
      },
      {
        label: "2026-01-01 ‚Äì Timelock Vault",
        address: "3ECBoJHeYwz4qDdovgHhME3Une89Zw63Ah",
        investedUsd: 0.0,
        btcAmount: 0.0,
        startDate: "2026-01-01",
        unlockDate: "2026-01-01T12:00:00Z",
        notes: "üîê Placeholder for Jan 1, 2026 timelock."
      },
      {
        label: "2026-04-01 ‚Äì Timelock Vault",
        address: "346AQ1Gz8AP9rmzupgj36vsuecjyNdtqt4",
        investedUsd: 0.0,
        btcAmount: 0.0,
        startDate: "2026-04-01",
        unlockDate: "2026-04-01T12:00:00Z",
        notes: "üîê Placeholder for Apr 1, 2026 timelock."
      }
    ];

    // === LOCALSTORAGE NOTES ===
    function saveVaultNotes(address, text) {
      localStorage.setItem(`vault-notes-${address}`, text);
    }

    function getStoredNotes(address) {
      return localStorage.getItem(`vault-notes-${address}`) || "";
    }

    // === HELPERS ===
    function formatUsd(num) {
      return `$${num.toLocaleString(undefined, {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      })}`;
    }

    function formatNumber(num) {
      return num.toLocaleString();
    }

    function computeVaultMetrics(vault, btcPrice) {
      const currentValue = vault.btcAmount * btcPrice;
      const pl = currentValue - vault.investedUsd;
      const roiPct =
        vault.investedUsd > 0 ? (pl / vault.investedUsd) * 100 : 0;
      const blendedAverage =
        vault.btcAmount > 0 ? vault.investedUsd / vault.btcAmount : 0;
      const sats = Math.round(vault.btcAmount * 100_000_000);

      let daysInMarket = 0;
      if (vault.startDate) {
        const start = new Date(vault.startDate);
        const now = new Date();
        daysInMarket = Math.floor((now - start) / MS_PER_DAY);
      }

      return {
        currentValue,
        pl,
        roiPct,
        blendedAverage,
        sats,
        daysInMarket
      };
    }

    function computeGlobalMetrics(btcPrice) {
      let totalInvested = 0;
      let totalBtc = 0;
      let earliestDate = null;

      vaults.forEach((vault) => {
        totalInvested += vault.investedUsd;
        totalBtc += vault.btcAmount;

        if (vault.startDate) {
          const d = new Date(vault.startDate);
          if (!earliestDate || d < earliestDate) earliestDate = d;
        }
      });

      const totalSats = Math.round(totalBtc * 100_000_000);
      const currentValue = totalBtc * btcPrice;
      const pl = currentValue - totalInvested;
      const roiPct =
        totalInvested > 0 ? (pl / totalInvested) * 100 : 0;
      const blendedAverage =
        totalBtc > 0 ? totalInvested / totalBtc : 0;

      let daysInMarket = 0;
      if (earliestDate) {
        const now = new Date();
        daysInMarket = Math.floor((now - earliestDate) / MS_PER_DAY);
      }

      return {
        totalInvested,
        totalBtc,
        totalSats,
        currentValue,
        pl,
        roiPct,
        blendedAverage,
        daysInMarket
      };
    }

    // === RENDERING ===
    function renderPortfolioSummary(btcPrice) {
      const g = computeGlobalMetrics(btcPrice);
      const bar = document.getElementById("portfolio-summary");
      bar.innerHTML = "";

      const items = [
        { label: "Total invested", value: formatUsd(g.totalInvested) },
        { label: "Total BTC", value: `${g.totalBtc.toFixed(8)} BTC` },
        { label: "Total sats", value: `${formatNumber(g.totalSats)} sats` },
        { label: "Current value", value: formatUsd(g.currentValue) },
        {
          label: "P/L",
          value:
            `${g.pl >= 0 ? "+" : ""}${formatUsd(g.pl)} (${g.roiPct.toFixed(2)}%)`
        },
        {
          label: "Time in market",
          value: `${g.daysInMarket} days`
        }
      ];

      items.forEach((it) => {
        const div = document.createElement("div");
        div.className = "portfolio-summary-item";
        div.innerHTML = `<span class="label">${it.label}:</span><span class="value">${it.value}</span>`;
        bar.appendChild(div);
      });
    }

    function renderTimelockTable(btcPrice) {
      const tbody = document.getElementById("timelock-body");
      tbody.innerHTML = "";

      vaults.forEach((vault) => {
        const m = computeVaultMetrics(vault, btcPrice);

        const start = vault.startDate ? new Date(vault.startDate) : null;
        const unlock = vault.unlockDate ? new Date(vault.unlockDate) : null;

        const startLabel = start
          ? start.toLocaleDateString(undefined, {
              year: "numeric",
              month: "short",
              day: "numeric"
            })
          : "‚Äî";

        const unlockLabel = unlock
          ? unlock.toLocaleDateString(undefined, {
              year: "numeric",
              month: "short",
              day: "numeric"
            })
          : "‚Äî";

        const tr = document.createElement("tr");

        tr.innerHTML = `
          <td>${vault.label}</td>
          <td class="address">${vault.address}</td>
          <td>${startLabel}</td>
          <td>${unlockLabel}</td>
          <td class="numeric">${formatUsd(vault.investedUsd)}</td>
          <td class="numeric">${vault.btcAmount.toFixed(8)}</td>
          <td class="numeric">${formatNumber(m.sats)}</td>
          <td class="numeric">${m.blendedAverage ? formatUsd(m.blendedAverage) : "$0.00"}</td>
          <td class="numeric">${formatUsd(m.currentValue)}</td>
          <td class="numeric ${m.pl >= 0 ? "pl-positive" : "pl-negative"}">
            ${(m.pl >= 0 ? "+" : "") + formatUsd(m.pl)}
          </td>
          <td class="numeric">${m.roiPct.toFixed(2)}%</td>
          <td class="numeric">${m.daysInMarket}</td>
        `;

        tbody.appendChild(tr);
      });
    }

    function renderNotes() {
      const container = document.getElementById("notes-container");
      container.innerHTML = "";

      vaults.forEach((vault) => {
        const existing = getStoredNotes(vault.address) || vault.notes || "";
        const wrapper = document.createElement("div");
        wrapper.className = "vault-notes-row";

        wrapper.innerHTML = `
          <h3>${vault.label}</h3>
          <textarea
            placeholder="Add notes for ${vault.label}‚Ä¶"
          >${existing}</textarea>
        `;

        const textarea = wrapper.querySelector("textarea");
        textarea.addEventListener("input", (e) => {
          saveVaultNotes(vault.address, e.target.value);
        });

        container.appendChild(wrapper);
      });
    }

    // === BTC + GOLD HEADER & FULL RENDER ===
    async function loadBitcoinData() {
      try {
        const res = await fetch(
          "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_market_cap=true"
        );
        const data = await res.json();
        const price = data.bitcoin.usd;
        const mcap = data.bitcoin.usd_market_cap;

        const priceEl = document.getElementById("btc-price");
        const mcapEl = document.getElementById("btc-mcap");
        const goldEl = document.getElementById("gold-mcap");

        if (priceEl) priceEl.textContent = `$${price.toLocaleString()}`;
        if (mcapEl) mcapEl.textContent = `$${mcap.toLocaleString()}`;
        if (goldEl) goldEl.textContent = "$14.2T (static est.)";

        renderPortfolioSummary(price);
        renderTimelockTable(price);
        renderNotes();
      } catch (err) {
        console.error("Error loading BTC data:", err);
      }
    }

    loadBitcoinData();
    setInterval(loadBitcoinData, 60_000);
  </script>
</body>
</html>
